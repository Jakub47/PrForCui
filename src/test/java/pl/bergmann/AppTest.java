package pl.bergmann;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import org.junit.Test;

/**
 * Unit test for simple App.
 */
public class AppTest 
{

    @Test
    public void isResponseEmptyFromNbp()
    {
        String url = PropertyReader.getValueInPropertyFileByKey("nbp.urlfirstPart");
        url = url.replace("{startingData}","2019-10-10")
                .replace("{endingDate}","2020-02-26");

        String result = App.getResponseFromNbp(url);
        assertNotNull(result);
    }

    @Test
    public void isDataInOrder()
    {
        String response = "{\"table\":\"C\",\"currency\":\"dolar ameryka≈Ñski\",\"code\":\"USD\",\"rates\":[{\"no\":\"197/C/NBP/2019\",\"effectiveDate\":\"2019-10-10\",\"bid\":3.8957,\"ask\":3.9745},{\"no\":\"198/C/NBP/2019\",\"effectiveDate\":\"2019-10-11\",\"bid\":3.8757,\"ask\":3.9539},{\"no\":\"199/C/NBP/2019\",\"effectiveDate\":\"2019-10-14\",\"bid\":3.8533,\"ask\":3.9311},{\"no\":\"200/C/NBP/2019\",\"effectiveDate\":\"2019-10-15\",\"bid\":3.8562,\"ask\":3.9342},{\"no\":\"201/C/NBP/2019\",\"effectiveDate\":\"2019-10-16\",\"bid\":3.8670,\"ask\":3.9452},{\"no\":\"202/C/NBP/2019\",\"effectiveDate\":\"2019-10-17\",\"bid\":3.8450,\"ask\":3.9226},{\"no\":\"203/C/NBP/2019\",\"effectiveDate\":\"2019-10-18\",\"bid\":3.8108,\"ask\":3.8878},{\"no\":\"204/C/NBP/2019\",\"effectiveDate\":\"2019-10-21\",\"bid\":3.8082,\"ask\":3.8852},{\"no\":\"205/C/NBP/2019\",\"effectiveDate\":\"2019-10-22\",\"bid\":3.8001,\"ask\":3.8769},{\"no\":\"206/C/NBP/2019\",\"effectiveDate\":\"2019-10-23\",\"bid\":3.7992,\"ask\":3.8760},{\"no\":\"207/C/NBP/2019\",\"effectiveDate\":\"2019-10-24\",\"bid\":3.8062,\"ask\":3.8830},{\"no\":\"208/C/NBP/2019\",\"effectiveDate\":\"2019-10-25\",\"bid\":3.8108,\"ask\":3.8878},{\"no\":\"209/C/NBP/2019\",\"effectiveDate\":\"2019-10-28\",\"bid\":3.8184,\"ask\":3.8956},{\"no\":\"210/C/NBP/2019\",\"effectiveDate\":\"2019-10-29\",\"bid\":3.8150,\"ask\":3.8920},{\"no\":\"211/C/NBP/2019\",\"effectiveDate\":\"2019-10-30\",\"bid\":3.8019,\"ask\":3.8787},{\"no\":\"212/C/NBP/2019\",\"effectiveDate\":\"2019-10-31\",\"bid\":3.7982,\"ask\":3.8750},{\"no\":\"213/C/NBP/2019\",\"effectiveDate\":\"2019-11-04\",\"bid\":3.7819,\"ask\":3.8583},{\"no\":\"214/C/NBP/2019\",\"effectiveDate\":\"2019-11-05\",\"bid\":3.7840,\"ask\":3.8604},{\"no\":\"215/C/NBP/2019\",\"effectiveDate\":\"2019-11-06\",\"bid\":3.8053,\"ask\":3.8821},{\"no\":\"216/C/NBP/2019\",\"effectiveDate\":\"2019-11-07\",\"bid\":3.8105,\"ask\":3.8875},{\"no\":\"217/C/NBP/2019\",\"effectiveDate\":\"2019-11-08\",\"bid\":3.8119,\"ask\":3.8889},{\"no\":\"218/C/NBP/2019\",\"effectiveDate\":\"2019-11-12\",\"bid\":3.8254,\"ask\":3.9026},{\"no\":\"219/C/NBP/2019\",\"effectiveDate\":\"2019-11-13\",\"bid\":3.8432,\"ask\":3.9208},{\"no\":\"220/C/NBP/2019\",\"effectiveDate\":\"2019-11-14\",\"bid\":3.8556,\"ask\":3.9334},{\"no\":\"221/C/NBP/2019\",\"effectiveDate\":\"2019-11-15\",\"bid\":3.8601,\"ask\":3.9381},{\"no\":\"222/C/NBP/2019\",\"effectiveDate\":\"2019-11-18\",\"bid\":3.8328,\"ask\":3.9102},{\"no\":\"223/C/NBP/2019\",\"effectiveDate\":\"2019-11-19\",\"bid\":3.8381,\"ask\":3.9157},{\"no\":\"224/C/NBP/2019\",\"effectiveDate\":\"2019-11-20\",\"bid\":3.8344,\"ask\":3.9118},{\"no\":\"225/C/NBP/2019\",\"effectiveDate\":\"2019-11-21\",\"bid\":3.8375,\"ask\":3.9151},{\"no\":\"226/C/NBP/2019\",\"effectiveDate\":\"2019-11-22\",\"bid\":3.8386,\"ask\":3.9162},{\"no\":\"227/C/NBP/2019\",\"effectiveDate\":\"2019-11-25\",\"bid\":3.8496,\"ask\":3.9274},{\"no\":\"228/C/NBP/2019\",\"effectiveDate\":\"2019-11-26\",\"bid\":3.8614,\"ask\":3.9394},{\"no\":\"229/C/NBP/2019\",\"effectiveDate\":\"2019-11-27\",\"bid\":3.8676,\"ask\":3.9458},{\"no\":\"230/C/NBP/2019\",\"effectiveDate\":\"2019-11-28\",\"bid\":3.8789,\"ask\":3.9573},{\"no\":\"231/C/NBP/2019\",\"effectiveDate\":\"2019-11-29\",\"bid\":3.8890,\"ask\":3.9676},{\"no\":\"232/C/NBP/2019\",\"effectiveDate\":\"2019-12-02\",\"bid\":3.8838,\"ask\":3.9622},{\"no\":\"233/C/NBP/2019\",\"effectiveDate\":\"2019-12-03\",\"bid\":3.8435,\"ask\":3.9211},{\"no\":\"234/C/NBP/2019\",\"effectiveDate\":\"2019-12-04\",\"bid\":3.8249,\"ask\":3.9021},{\"no\":\"235/C/NBP/2019\",\"effectiveDate\":\"2019-12-05\",\"bid\":3.8144,\"ask\":3.8914},{\"no\":\"236/C/NBP/2019\",\"effectiveDate\":\"2019-12-06\",\"bid\":3.8139,\"ask\":3.8909},{\"no\":\"237/C/NBP/2019\",\"effectiveDate\":\"2019-12-09\",\"bid\":3.8358,\"ask\":3.9132},{\"no\":\"238/C/NBP/2019\",\"effectiveDate\":\"2019-12-10\",\"bid\":3.8284,\"ask\":3.9058},{\"no\":\"239/C/NBP/2019\",\"effectiveDate\":\"2019-12-11\",\"bid\":3.8333,\"ask\":3.9107},{\"no\":\"240/C/NBP/2019\",\"effectiveDate\":\"2019-12-12\",\"bid\":3.8261,\"ask\":3.9033},{\"no\":\"241/C/NBP/2019\",\"effectiveDate\":\"2019-12-13\",\"bid\":3.8130,\"ask\":3.8900},{\"no\":\"242/C/NBP/2019\",\"effectiveDate\":\"2019-12-16\",\"bid\":3.7913,\"ask\":3.8679},{\"no\":\"243/C/NBP/2019\",\"effectiveDate\":\"2019-12-17\",\"bid\":3.7856,\"ask\":3.8620},{\"no\":\"244/C/NBP/2019\",\"effectiveDate\":\"2019-12-18\",\"bid\":3.7791,\"ask\":3.8555},{\"no\":\"245/C/NBP/2019\",\"effectiveDate\":\"2019-12-19\",\"bid\":3.8035,\"ask\":3.8803},{\"no\":\"246/C/NBP/2019\",\"effectiveDate\":\"2019-12-20\",\"bid\":3.7907,\"ask\":3.8673},{\"no\":\"247/C/NBP/2019\",\"effectiveDate\":\"2019-12-23\",\"bid\":3.8046,\"ask\":3.8814},{\"no\":\"248/C/NBP/2019\",\"effectiveDate\":\"2019-12-24\",\"bid\":3.8091,\"ask\":3.8861},{\"no\":\"249/C/NBP/2019\",\"effectiveDate\":\"2019-12-27\",\"bid\":3.8102,\"ask\":3.8872},{\"no\":\"250/C/NBP/2019\",\"effectiveDate\":\"2019-12-30\",\"bid\":3.7821,\"ask\":3.8585},{\"no\":\"251/C/NBP/2019\",\"effectiveDate\":\"2019-12-31\",\"bid\":3.7636,\"ask\":3.8396},{\"no\":\"001/C/NBP/2020\",\"effectiveDate\":\"2020-01-02\",\"bid\":3.7597,\"ask\":3.8357},{\"no\":\"002/C/NBP/2020\",\"effectiveDate\":\"2020-01-03\",\"bid\":3.7667,\"ask\":3.8427},{\"no\":\"003/C/NBP/2020\",\"effectiveDate\":\"2020-01-07\",\"bid\":3.7679,\"ask\":3.8441},{\"no\":\"004/C/NBP/2020\",\"effectiveDate\":\"2020-01-08\",\"bid\":3.7704,\"ask\":3.8466},{\"no\":\"005/C/NBP/2020\",\"effectiveDate\":\"2020-01-09\",\"bid\":3.7724,\"ask\":3.8486},{\"no\":\"006/C/NBP/2020\",\"effectiveDate\":\"2020-01-10\",\"bid\":3.7817,\"ask\":3.8581},{\"no\":\"007/C/NBP/2020\",\"effectiveDate\":\"2020-01-13\",\"bid\":3.7823,\"ask\":3.8587},{\"no\":\"008/C/NBP/2020\",\"effectiveDate\":\"2020-01-14\",\"bid\":3.7731,\"ask\":3.8493},{\"no\":\"009/C/NBP/2020\",\"effectiveDate\":\"2020-01-15\",\"bid\":3.7566,\"ask\":3.8324},{\"no\":\"010/C/NBP/2020\",\"effectiveDate\":\"2020-01-16\",\"bid\":3.7487,\"ask\":3.8245},{\"no\":\"011/C/NBP/2020\",\"effectiveDate\":\"2020-01-17\",\"bid\":3.7640,\"ask\":3.8400},{\"no\":\"012/C/NBP/2020\",\"effectiveDate\":\"2020-01-20\",\"bid\":3.7823,\"ask\":3.8587},{\"no\":\"013/C/NBP/2020\",\"effectiveDate\":\"2020-01-21\",\"bid\":3.7890,\"ask\":3.8656},{\"no\":\"014/C/NBP/2020\",\"effectiveDate\":\"2020-01-22\",\"bid\":3.7739,\"ask\":3.8501},{\"no\":\"015/C/NBP/2020\",\"effectiveDate\":\"2020-01-23\",\"bid\":3.7871,\"ask\":3.8637},{\"no\":\"016/C/NBP/2020\",\"effectiveDate\":\"2020-01-24\",\"bid\":3.7974,\"ask\":3.8742},{\"no\":\"017/C/NBP/2020\",\"effectiveDate\":\"2020-01-27\",\"bid\":3.8178,\"ask\":3.8950},{\"no\":\"018/C/NBP/2020\",\"effectiveDate\":\"2020-01-28\",\"bid\":3.8414,\"ask\":3.9190},{\"no\":\"019/C/NBP/2020\",\"effectiveDate\":\"2020-01-29\",\"bid\":3.8427,\"ask\":3.9203},{\"no\":\"020/C/NBP/2020\",\"effectiveDate\":\"2020-01-30\",\"bid\":3.8576,\"ask\":3.9356},{\"no\":\"021/C/NBP/2020\",\"effectiveDate\":\"2020-01-31\",\"bid\":3.8519,\"ask\":3.9297},{\"no\":\"022/C/NBP/2020\",\"effectiveDate\":\"2020-02-03\",\"bid\":3.8501,\"ask\":3.9279},{\"no\":\"023/C/NBP/2020\",\"effectiveDate\":\"2020-02-04\",\"bid\":3.8493,\"ask\":3.9271},{\"no\":\"024/C/NBP/2020\",\"effectiveDate\":\"2020-02-05\",\"bid\":3.8289,\"ask\":3.9063},{\"no\":\"025/C/NBP/2020\",\"effectiveDate\":\"2020-02-06\",\"bid\":3.8143,\"ask\":3.8913},{\"no\":\"026/C/NBP/2020\",\"effectiveDate\":\"2020-02-07\",\"bid\":3.8343,\"ask\":3.9117},{\"no\":\"027/C/NBP/2020\",\"effectiveDate\":\"2020-02-10\",\"bid\":3.8562,\"ask\":3.9342},{\"no\":\"028/C/NBP/2020\",\"effectiveDate\":\"2020-02-11\",\"bid\":3.8636,\"ask\":3.9416},{\"no\":\"029/C/NBP/2020\",\"effectiveDate\":\"2020-02-12\",\"bid\":3.8536,\"ask\":3.9314},{\"no\":\"030/C/NBP/2020\",\"effectiveDate\":\"2020-02-13\",\"bid\":3.8599,\"ask\":3.9379},{\"no\":\"031/C/NBP/2020\",\"effectiveDate\":\"2020-02-14\",\"bid\":3.8807,\"ask\":3.9591},{\"no\":\"032/C/NBP/2020\",\"effectiveDate\":\"2020-02-17\",\"bid\":3.8725,\"ask\":3.9507},{\"no\":\"033/C/NBP/2020\",\"effectiveDate\":\"2020-02-18\",\"bid\":3.8922,\"ask\":3.9708},{\"no\":\"034/C/NBP/2020\",\"effectiveDate\":\"2020-02-19\",\"bid\":3.9148,\"ask\":3.9938},{\"no\":\"035/C/NBP/2020\",\"effectiveDate\":\"2020-02-20\",\"bid\":3.9200,\"ask\":3.9992},{\"no\":\"036/C/NBP/2020\",\"effectiveDate\":\"2020-02-21\",\"bid\":3.9145,\"ask\":3.9935},{\"no\":\"037/C/NBP/2020\",\"effectiveDate\":\"2020-02-24\",\"bid\":3.9223,\"ask\":4.0015},{\"no\":\"038/C/NBP/2020\",\"effectiveDate\":\"2020-02-25\",\"bid\":3.9249,\"ask\":4.0041},{\"no\":\"039/C/NBP/2020\",\"effectiveDate\":\"2020-02-26\",\"bid\":3.9227,\"ask\":4.0019}]}";
        ExchangeData data  = App.getDataFromResponseAndCalculateDiffrence(response);
        assertEquals(data.rates.get(0).effectiveDate, "2019-10-10");
    }

}
